(this["webpackJsonpreact-demo"]=this["webpackJsonpreact-demo"]||[]).push([[0],{59:function(e,t,n){e.exports=n(72)},64:function(e,t,n){},65:function(e,t,n){},72:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),o=n(11),r=n.n(o),s=(n(64),n(22)),u=n(23),l=n(16),c=n(27),m=n(28),h=n(51),d=n(94),p=n(98),g=n(97),f=n(100),C=n(45),v=n.n(C),y=n(44),E=n.n(y),w=n(46),k=n.n(w),b=n(42),S=n.n(b),x=n(41),j=n.n(x),O=n(47),P=n.n(O),A=n(48),T=n.n(A),M=n(49),V=n.n(M),W=n(50),D=n.n(W),N=n(95),B=n(99),I="shuffle",L="repeat_one",R="repeat_all",F=(n(65),function(e){Object(m.a)(n,e);var t=Object(c.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"formatSecond",value:function(e){var t=~~(e%3600/60),n=~~e%60;return(t<10?"0".concat(t):t)+":"+(n<10?"0".concat(n):n)}},{key:"render",value:function(){var e=this,t=null;return t=this.props.playing?i.a.createElement(d.a,{onClick:function(){return e.props.onClickPlayPause(!1)}},i.a.createElement(j.a,null)):i.a.createElement(d.a,{onClick:function(){return e.props.onClickPlayPause(!0)}},i.a.createElement(S.a,null)),i.a.createElement("div",{className:"player-controller"},i.a.createElement(N.a,{container:!0,alignItems:"center"},i.a.createElement(N.a,{item:!0,xs:12},i.a.createElement(N.a,{container:!0,alignItems:"center",justify:"center"},i.a.createElement(N.a,{item:!0,xs:10},i.a.createElement(B.a,{value:this.props.currentTime,max:this.props.duration,onChangeCommitted:function(t,n){return e.props.onCurrentTimeChange(n)},"aria-labelledby":"continuous-slider"})),i.a.createElement(N.a,{item:!0,xs:2},i.a.createElement(g.a,{display:"flex",alignItems:"center",justifyContent:"center"},i.a.createElement(f.a,{size:"small",label:this.formatSecond(this.props.currentTime)+"/"+this.formatSecond(this.props.duration)}))))),i.a.createElement(N.a,{item:!0,xs:4},i.a.createElement(N.a,{container:!0,justify:"center",spacing:2},i.a.createElement(N.a,{item:!0},i.a.createElement(p.a,{title:"Repeat All"},i.a.createElement(d.a,{color:this.props.mode===R?"primary":"default",onClick:function(){return e.props.onChangeMode(R)}},i.a.createElement(E.a,null)))),i.a.createElement(N.a,{item:!0},i.a.createElement(p.a,{title:"Shuffle"},i.a.createElement(d.a,{color:this.props.mode===I?"primary":"default",onClick:function(){return e.props.onChangeMode(I)}},i.a.createElement(v.a,null)))),i.a.createElement(N.a,{item:!0},i.a.createElement(p.a,{title:"Repeat One"},i.a.createElement(d.a,{color:this.props.mode===L?"primary":"default",onClick:function(){return e.props.onChangeMode(L)}},i.a.createElement(k.a,null)))))),i.a.createElement(N.a,{item:!0,xs:4},i.a.createElement(N.a,{container:!0,justify:"center",spacing:2},i.a.createElement(N.a,{item:!0},i.a.createElement(d.a,{onClick:function(){return e.props.onClickPreviousNext(-1)}},i.a.createElement(P.a,null))),i.a.createElement(N.a,{item:!0},t),i.a.createElement(N.a,{item:!0},i.a.createElement(d.a,{onClick:function(){return e.props.onClickPreviousNext(1)}},i.a.createElement(T.a,null))))),i.a.createElement(N.a,{item:!0,xs:4},i.a.createElement(N.a,{container:!0,spacing:2,alignItems:"center"},i.a.createElement(N.a,{item:!0},i.a.createElement(d.a,{onClick:function(){return e.props.onStepChangeVolume(-5)}},i.a.createElement(V.a,null))),i.a.createElement(N.a,{item:!0,xs:!0},i.a.createElement(B.a,{value:this.props.volume,max:100,onChangeCommitted:function(t,n){return e.props.onVolumeChange(n)},"aria-labelledby":"continuous-slider"})),i.a.createElement(N.a,{item:!0},i.a.createElement(d.a,{onClick:function(){return e.props.onStepChangeVolume(5)}},i.a.createElement(D.a,null)))))))}}]),n}(i.a.Component)),U=function(e){Object(m.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).canvas=i.a.createRef(),a.animation=null,a.ctx=null,a}return Object(u.a)(n,[{key:"renderAudio",value:function(){var e=this,t=this.props,n=t.width,a=t.height,i=t.analyser;!function t(){var o=new Uint8Array(i.frequencyBinCount);i.getByteFrequencyData(o);var r=e.ctx;r.clearRect(0,0,n,a),r.fillStyle="#3A5E8C",r.lineCap="round";for(var s=0;s<e.numBars;++s){var u=2*o[s+100];r.fillRect(10*s,a,5,-u)}e.animation=window.requestAnimationFrame(t)}()}},{key:"componentDidMount",value:function(){this.ctx=this.canvas.current.getContext("2d")}},{key:"componentDidUpdate",value:function(){this.numBars=Math.round(this.props.width/10),this.animation&&window.cancelAnimationFrame(this.animation),this.props.analyser&&this.renderAudio()}},{key:"componentWillUnmount",value:function(){this.animation&&window.cancelAnimationFrame(this.animation)}},{key:"render",value:function(){return i.a.createElement("canvas",{ref:this.canvas,width:this.props.width,height:this.props.height})}}]),n}(i.a.Component),q=window.AudioContext||window.webkitAudioContext;function z(e){return Object(h.a)(e).sort((function(){return Math.random()-.5}))}var J=function(e){Object(m.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).songs=["https://api.tomo.wang/audio/21312012.mp3","https://api.tomo.wang/audio/31654478.mp3","https://api.tomo.wang/audio/5271858.mp3","https://api.tomo.wang/audio/36990266.mp3","https://api.tomo.wang/audio/27937429.mp3","https://api.tomo.wang/audio/94689.mp3","https://api.tomo.wang/audio/5113327.mp3","https://api.tomo.wang/audio/536096151.mp3","https://api.tomo.wang/audio/1437405183.mp3","https://api.tomo.wang/audio/4208658.mp3"],a.shuffleSongs=z(a.songs),a.current=0,a.currentSong=a.songs[a.current],a.state={mode:R,volume:50,duration:0,currentTime:0,playing:!1,width:0,height:0,analyser:null},a.audio=null,a.source=null,a.audioCtx=null,a.analyser=null,a.updateWindowDimensions=a.updateWindowDimensions.bind(Object(l.a)(a)),a.onVolumeChange=a.onVolumeChange.bind(Object(l.a)(a)),a.onCurrentTimeChange=a.onCurrentTimeChange.bind(Object(l.a)(a)),a.onClickPlayPause=a.onClickPlayPause.bind(Object(l.a)(a)),a.onClickPreviousNext=a.onClickPreviousNext.bind(Object(l.a)(a)),a.onStepChangeVolume=a.onStepChangeVolume.bind(Object(l.a)(a)),a.onChangeMode=a.onChangeMode.bind(Object(l.a)(a)),a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.updateWindowDimensions(),window.addEventListener("resize",this.updateWindowDimensions)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWindowDimensions)}},{key:"updateWindowDimensions",value:function(){this.setState({width:window.innerWidth,height:window.innerHeight})}},{key:"onVolumeChange",value:function(e){this.setState({volume:e}),this.audio&&(this.audio.volume=e/100)}},{key:"onStepChangeVolume",value:function(e){var t=this.state.volume+e;t=t<0?0:t>100?100:t,this.onVolumeChange(t)}},{key:"onCurrentTimeChange",value:function(e){this.setState({currentTime:e}),this.audio&&(this.audio.currentTime=e)}},{key:"onClickPlayPause",value:function(e){this.audio?e?this.audio.play():this.audio.pause():e&&this.setupAudio(),this.setState({playing:e})}},{key:"onClickPreviousNext",value:function(e){this.changeSong(e)}},{key:"onChangeMode",value:function(e){e===I&&(this.shuffleSongs=z(this.songs),this.current=this.shuffleSongs.indexOf(this.currentSong)),this.setState({mode:e})}},{key:"changeSong",value:function(e){var t=this.current,n=this.songs;this.state.mode===I?n=this.shuffleSongs:this.state.mode===L&&(n=[this.currentSong]),t=-1===e?0===t?n.length-1:t-1:t===n.length-1?0:t+1,this.current=t,this.currentSong=n[t],this.setupAudio()}},{key:"setupAudio",value:function(){var e=this;this.audio&&this.audio.remove(),this.source&&this.source.disconnect(),this.audioCtx||(this.audioCtx=new q),this.audio=new Audio,this.audio.crossOrigin="anonymous",this.audio.src=this.currentSong;var t=this.state.analyser||this.audioCtx.createAnalyser();this.source=this.audioCtx.createMediaElementSource(this.audio),this.source.connect(t),t.connect(this.audioCtx.destination),this.audio.volume=this.state.volume/100,this.setState({analyser:t,playing:!0}),this.audio.addEventListener("canplay",(function(){e.setState({duration:e.audio.duration}),e.state.playing&&e.audio.play()})),this.audio.addEventListener("timeupdate",(function(){e.setState({currentTime:e.audio.currentTime})})),this.audio.addEventListener("ended",(function(){e.changeSong(1)}))}},{key:"render",value:function(){var e=this.state,t=e.width,n=e.height,a=e.analyser;return i.a.createElement("div",null,i.a.createElement(F,{duration:this.state.duration,currentTime:this.state.currentTime,volume:this.state.volume,playing:this.state.playing,mode:this.state.mode,onVolumeChange:this.onVolumeChange,onStepChangeVolume:this.onStepChangeVolume,onCurrentTimeChange:this.onCurrentTimeChange,onClickPlayPause:this.onClickPlayPause,onClickPreviousNext:this.onClickPreviousNext,onChangeMode:this.onChangeMode}),i.a.createElement(U,{analyser:a,width:t,height:n}))}}]),n}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(J,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[59,1,2]]]);
//# sourceMappingURL=main.68b1afff.chunk.js.map